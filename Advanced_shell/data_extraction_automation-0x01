#!/bin/bash

# Pok√©mon data extraction script
# Extracts name, height, weight, and type from data.json
# Uses jq, awk, and sed for text manipulation

# Check if data.json exists
if [ ! -f "data.json" ]; then
    echo "Error: data.json not found. Please run the API automation script first."
    exit 1
fi

# Extract data using jq and format with awk and sed
# Get name, height, weight, and type from the JSON
pokemon_data=$(jq -r '.name, .height, .weight, .types[0].type.name' data.json)

# Use awk to format the output and sed to clean it up
echo "$pokemon_data" | awk '
BEGIN {
    # Read the extracted values
    getline name
    getline height
    getline weight
    getline type
    
    # Convert height from decimeters to meters (divide by 10)
    height_m = height / 10
    
    # Convert weight from hectograms to kilograms (divide by 10)
    weight_kg = weight / 10
    
    # Capitalize first letter of type
    type = toupper(substr(type, 1, 1)) substr(type, 2)
    
    # Capitalize first letter of name
    name = toupper(substr(name, 1, 1)) substr(name, 2)
    
    # Format the output using the exact required format
    formatted_height = sprintf("%.1f", height_m)
    formatted_weight = sprintf("%.0f", weight_kg)
    
    # Output the exact required format
    print name " is of type " type ", weighs " formatted_weight "kg, and is " formatted_height "m tall."
}'
